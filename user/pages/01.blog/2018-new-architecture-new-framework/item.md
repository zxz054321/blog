---
title: 2018新博客新架构新选型
date: '01-01-2018 00:00'
taxonomy:
    category:
        - blog
author: Abel
---

我初中时开始搭建个人网站，小时候喜欢高大全，因此我的建站之路是从形形色色的CMS系统开始的。从ASP时代的动易（PowerEasy），到PHP时代的帝国CMS、织梦CMS，到更轻型的Emolog等博客系统，最终在WordPress停留下来。

历经多年，时代变迁，WordPress虽然是一个极成功的博客系统，但它的历史包袱是越来越沉重。现代PHP生态最低都是以5.4版本起步了，背着兼容性包袱的WordPress，还用着古老的PHP5.2，其架构和代码都很有历史感。此次博客底层大换血，是为了使我的网站更加贴合我的需求，更加方便我的开发，同时也能跟工作实践相互印证。

===

## 选型 / 决策过程

做技术选型，不是一件简单的事。

首先要根据需求，决定大致的选型方向和范围。自建独立博客的成本很高，从选购服务器、部署运行环境、开发部署博客程序、长期的服务器运维工作等，全都需要自己来。这远比直接开一个Medium、CSDN博客等托管型博客服务麻烦得多，成本也高得多。不过自建博客也是很锻炼人的，几乎整个Web产品开发生命周期都要自己做一次。

### 选购服务器

服务器有很多类型，有传统的VPS，新兴的云服务器，或轻量级的Docker容器、应用引擎……工作主要接触云服务器，故选用云服务器。 作为一个需要长期运行但又没什么流量的博客，自然是成本越低越好。因此选择最低配EC2可免费使用的AWS。

### 部署运行环境

部署运行环境有很多种方式，可以走自动化（Saas运维服务或运维工具），也可以全手动自己来。自主项目我会使用Laravel Forge服务，一键解决部署和运维。但对于个人非商业项目来说，这服务略贵，因此选择手工部署运维。

操作系统选用Ubuntu Server 16.04 LTS。虽然国内很多运维人员都偏爱CentOS，但国外开源社区却更爱Ubuntu。我常年混迹于国外开源社区，自然要跟繁荣生态接轨。

运行环境方面，自主项目我会选用经典的LAMP组合，后端表现稳定。因工作使用Nginx，选用LNMP组合，其中：

- PHP选用7.0版本：为迁移到新版框架考虑，Laravel 5.5 LTS最低要求PHP 7.0
- MySQL选用5.6版本：为最大兼容性考虑，目前很多环境尚未升级到MySQL 5.7

### 开发部署博客程序

Grav是目前GitHub上最多Stars的PHP建站类项目（CMS或博客），比排第二的OctoberCMS高了一截。我相信开源社区的力量，能在社区里有如此人气，肯定是有原因的。

近年来，十多年前很繁荣的传统CMS都逐渐销声匿迹，比如帝国、织梦、PHPCMS等，越来越少见。一直以来也没见到有什么特别成气候的CMS系统，新兴的CMS系统中，倒是出现了一个新趋势——flat-file CMS。所谓flat-file，简单来说可以理解成：用文件（而非数据库）来存储数据，可以降低系统的复杂性，做到更灵活轻便。

Grav基于PHP 5.5版本编写，使用Compoesr作依赖管理，并且自己实现了GPM插件管理器。Grav完美融合了现代PHP生态，架构设计也很科学，可轻可重，可傻瓜化使用，也可以自主开发定制。很适合我这种没什么精力去维护，但需求又有点与众不同的小博客。

### 服务器运维

新年快乐，未完待续……